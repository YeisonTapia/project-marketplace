<template>  <div class="row gutter-y-sm">    <div class="col-md-12">      <div v-for="(field, index) in fields" :key="index">            <!--For type Text-->        <div v-if="field.type == '1'">          <q-field            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-input              :placeholder="field.placeholder"              v-model="field.model"              type="text"              :stack-label="field.label"/>          </q-field>        </div>            <!--For type TextArea-->        <div v-if="field.type == '2'">          <q-field            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-input              :placeholder="field.placeholder"              v-model="field.model"              type="textarea"              rows="3"              :stack-label="field.label"/>          </q-field>        </div>            <!--For type Number-->        <div v-if="field.type == '3'">          <q-field            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-input              :placeholder="field.placeholder"              v-model="field.model"              type="number"              :stack-label="field.label"/>          </q-field>        </div>            <!--For type Email-->        <div v-if="field.type == '4'">          <q-field            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-input              :placeholder="field.placeholder"              v-model="field.model"              type="email"              :stack-label="field.label"/>          </q-field>        </div>            <!--For type Select and For type Select Multiple-->        <div v-if="field.type == '5' || field.type == '6'">          <q-field            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-select              :placeholder="field.placeholder"              :multiple="field.type == 6 ? true : false"              :stack-label="field.label"              v-model="field.model"              :options="getOptions(JSON.parse(field.selectable))"/>          </q-field>        </div>            <!--For type CheckBox-->        <div v-if="field.type == '7'">          <q-field            class="q-my-md"            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-checkbox              v-model="field.model"              :label="field.label"              :false-value="''"              true-value="1"/>          </q-field>        </div>            <!--For type Radio-->        <div v-if="field.type == '8'">          <q-field            class="q-my-md"            :error="field.required == false ?  false : $v.fields[field.name].model.$error"            :error-label="$tr('ui.message.fieldRequired')">            <q-radio              class="q-mr-lg"              v-for="(option, index) in getOptions(JSON.parse(field.selectable))"              :key="index"              v-model="field.model"              :val="option.value"              :label="option.label" />          </q-field>        </div>            <!--For type Locations-->        <div v-if="field.type == '9'">          <locations/>        </div>        </div>    </div>    <div class="col-md-12">      <q-btn        label="save"        color="primary"        @click="createLead()"/>    </div>  </div></template><script>  import locations from '@imagina/qform/_components/frontend/forms/locations'  import { required } from 'vuelidate/lib/validators'  export default {    props:{      formId:{        type: Number,        required: true,      }    },   components:{     locations   },    watch:{    },    validations(){      return this.getObjectValidation()    },    data (){      return {        fields:{},        loading: false,      }    },    created() {      this.getFields()    },    methods:{      getFields(refresh = false){        this.loading = true        let params = {          refresh: refresh,          params :{            filter: {              formId: this.formId,              order:{                field:'order',                way: 'asc'              }            }          }        }        this.$crud.index('apiRoutes.qform.fields', params)        .then( response => {          this.fields =  this.responseToObject(response.data)          this.loading = false        })        .catch( error => {          this.loading = false          this.$alert.error({message: this.$tr('ui.message.errorRequest'), pos: 'bottom'})        })      },      responseToObject(array){        let response = {}         array.forEach( item => {           response[item.name] = item           response[item.name]['model'] = item.type == 5 || item.type == 6 ? [] : ''        })        return response      },      getOptions(array){        return array.map( item => {          return {            label: item.name,            value: item.name          }        })      },      getObjectValidation() {        let response = {}        Object.keys(this.fields).forEach((key) => {          if (this.fields[key].required){            response[key] = {              model : {required}            }          }        })        return {fields: response}      },      createLead () {        this.$v.fields.$touch()        if (this.$v.fields.$error) {          this.$alert.error({message: this.$tr('ui.message.formInvalid'), pos: 'bottom'})          return        }        let data = {          formId: this.formId,          values: JSON.stringify(this.fields)        }        this.$crud.create('apiRoutes.qform.leads', data)        .then( response => {          this.getFields()          this.$alert.success({message: `${this.$tr('ui.message.recordCreated')} ID: ${response.data.id}`})          this.$v.fields.$reset()        })        .catch( error => {          this.$alert.error({message: this.$tr('ui.message.recordNoCreated'), pos: 'bottom'})        })      },    }  }</script><style scoped></style>